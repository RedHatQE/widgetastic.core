

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Common Patterns &mdash; Widgetastic.Core development documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />


      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=249f3023"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorials" href="../tutorials/index.html" />
    <link rel="prev" title="Basic Example" href="basic-example.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



          <a href="../index.html" class="icon icon-home">
            Widgetastic.Core
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/concepts.html">Core Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-steps.html">First Steps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Quick Start</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#what-you-ll-learn">What You’ll Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#minute-start">5-Minute Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#examples-by-use-case">Examples by Use Case</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#quick-reference">Quick Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#success-stories">Success Stories</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#common-use-cases">Common Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#integration-examples">Integration Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#next-steps">Next Steps</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basic-example.html">Basic Example</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Common Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#form-automation-patterns">Form Automation Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-extraction-patterns">Data Extraction Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#navigation-patterns">Navigation Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wait-and-timing-patterns">Wait and Timing Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-handling-patterns">Error Handling Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-integration-patterns">Testing Integration Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic-example.html">Basic Example</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Common Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#form-automation-patterns">Form Automation Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-extraction-patterns">Data Extraction Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#navigation-patterns">Navigation Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wait-and-timing-patterns">Wait and Timing Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#error-handling-patterns">Error Handling Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-integration-patterns">Testing Integration Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/basic-widgets.html">Basic Widgets Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/views-and-navigation.html">Views and Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/browser-methods.html">Browser Methods and Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/fill-strategies.html">Fill Strategies Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/advanced-widgets.html">Advanced Widgets Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/iframe-handling.html">IFrame Handling Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/window-management.html">Window Management Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/ouia-automation.html">OUIA (Open UI Automation) Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/version-picking.html">Version Picking Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/custom-widgets.html">Custom Widget Development Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Widgetastic.Core</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Quick Start</a></li>
      <li class="breadcrumb-item active">Common Patterns</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/quickstart/common-patterns.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <section id="common-patterns">
<h1>Common Patterns<a class="headerlink" href="#common-patterns" title="Link to this heading"></a></h1>
<p>This guide covers the most frequently used widgetastic patterns. Master these and you’ll handle 90% of automation scenarios efficiently.</p>
<section id="form-automation-patterns">
<h2>Form Automation Patterns<a class="headerlink" href="#form-automation-patterns" title="Link to this heading"></a></h2>
<p><strong>Pattern 1: Simple Form Fill</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">widgetastic.widget</span><span class="w"> </span><span class="kn">import</span> <span class="n">View</span><span class="p">,</span> <span class="n">TextInput</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span> <span class="n">Checkbox</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ContactForm</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#name&quot;</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#email&quot;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#message&quot;</span><span class="p">)</span>
    <span class="n">subscribe</span> <span class="o">=</span> <span class="n">Checkbox</span><span class="p">(</span><span class="s2">&quot;#newsletter&quot;</span><span class="p">)</span>
    <span class="n">submit</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#submit&quot;</span><span class="p">)</span>

<span class="c1"># Usage</span>
<span class="n">form</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
<span class="n">form</span><span class="o">.</span><span class="n">fill</span><span class="p">({</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;john@example.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello there!&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subscribe&quot;</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">})</span>
<span class="n">form</span><span class="o">.</span><span class="n">submit</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Pattern 2: Conditional Form Fields</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">RegistrationForm</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">user_type</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="s2">&quot;#userType&quot;</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#email&quot;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#password&quot;</span><span class="p">)</span>

    <span class="c1"># Conditional fields</span>
    <span class="n">company_name</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#companyName&quot;</span><span class="p">)</span>  <span class="c1"># Only for business users</span>
    <span class="n">personal_code</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#personalCode&quot;</span><span class="p">)</span>  <span class="c1"># Only for personal users</span>

<span class="k">def</span><span class="w"> </span><span class="nf">smart_fill</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">user_data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fill form intelligently based on user type.&quot;&quot;&quot;</span>

    <span class="c1"># Fill basic fields first</span>
    <span class="n">form</span><span class="o">.</span><span class="n">fill</span><span class="p">({</span>
        <span class="s2">&quot;user_type&quot;</span><span class="p">:</span> <span class="n">user_data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">user_data</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">],</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">user_data</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">]</span>
    <span class="p">})</span>

    <span class="c1"># Fill conditional fields based on selection</span>
    <span class="k">if</span> <span class="n">user_data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;business&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">company_name</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
            <span class="n">form</span><span class="o">.</span><span class="n">company_name</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">user_data</span><span class="p">[</span><span class="s2">&quot;company&quot;</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">user_data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;personal&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">personal_code</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
            <span class="n">form</span><span class="o">.</span><span class="n">personal_code</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">user_data</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Pattern 3: Form Validation Handling</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ValidatedForm</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#email&quot;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#password&quot;</span><span class="p">)</span>
    <span class="n">submit</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#submit&quot;</span><span class="p">)</span>

    <span class="c1"># Validation messages</span>
    <span class="n">email_error</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#email-error&quot;</span><span class="p">)</span>
    <span class="n">password_error</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#password-error&quot;</span><span class="p">)</span>
    <span class="n">general_error</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.alert-danger&quot;</span><span class="p">)</span>
    <span class="n">success_message</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.alert-success&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">submit_with_validation</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Submit form and handle validation errors.&quot;&quot;&quot;</span>

    <span class="n">form</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">form</span><span class="o">.</span><span class="n">submit</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="c1"># Check for field-specific errors</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">email_error</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
        <span class="n">errors</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">email_error</span><span class="o">.</span><span class="n">text</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">password_error</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
        <span class="n">errors</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">password_error</span><span class="o">.</span><span class="n">text</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">general_error</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
        <span class="n">errors</span><span class="p">[</span><span class="s2">&quot;general&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">general_error</span><span class="o">.</span><span class="n">text</span>

    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">errors</span>

    <span class="c1"># Check for success</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">success_message</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">form</span><span class="o">.</span><span class="n">success_message</span><span class="o">.</span><span class="n">text</span>

    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;Form submitted successfully&quot;</span>
</pre></div>
</div>
</section>
<section id="data-extraction-patterns">
<h2>Data Extraction Patterns<a class="headerlink" href="#data-extraction-patterns" title="Link to this heading"></a></h2>
<p><strong>Pattern 1: Table Data Extraction</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">widgetastic.widget</span><span class="w"> </span><span class="kn">import</span> <span class="n">Table</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DataTable</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">users_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;#users-table&quot;</span><span class="p">)</span>

    <span class="c1"># Pagination controls</span>
    <span class="n">next_page</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;.pagination .next&quot;</span><span class="p">)</span>
    <span class="n">page_info</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.pagination .info&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">extract_all_table_data</span><span class="p">(</span><span class="n">view</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract data from paginated table.&quot;&quot;&quot;</span>

    <span class="n">all_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extracting page </span><span class="si">{</span><span class="n">page</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

        <span class="c1"># Get current page data</span>
        <span class="n">page_data</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">users_table</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">all_data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">page_data</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">page_data</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[</span><span class="n">page_data</span><span class="p">])</span>

        <span class="c1"># Check if there&#39;s a next page</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="o">.</span><span class="n">next_page</span><span class="o">.</span><span class="n">is_displayed</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">view</span><span class="o">.</span><span class="n">next_page</span><span class="o">.</span><span class="n">is_enabled</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="n">view</span><span class="o">.</span><span class="n">next_page</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">page</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Wait for page to load</span>
        <span class="n">view</span><span class="o">.</span><span class="n">users_table</span><span class="o">.</span><span class="n">wait_displayed</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">all_data</span>
</pre></div>
</div>
<p><strong>Pattern 2: Dynamic Content Extraction</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DashboardView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="c1"># Stats that update in real-time</span>
    <span class="n">total_users</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#total-users&quot;</span><span class="p">)</span>
    <span class="n">active_sessions</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#active-sessions&quot;</span><span class="p">)</span>
    <span class="n">system_status</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#system-status&quot;</span><span class="p">)</span>

    <span class="c1"># Dynamic lists</span>
    <span class="n">recent_activities</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.activity-item&quot;</span><span class="p">)</span>  <span class="c1"># Multiple elements</span>

<span class="k">def</span><span class="w"> </span><span class="nf">monitor_dashboard</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Monitor dashboard metrics over time.&quot;&quot;&quot;</span>

    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

    <span class="n">metrics_history</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">duration</span><span class="p">:</span>
        <span class="c1"># Capture current metrics</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
            <span class="s2">&quot;total_users&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">total_users</span><span class="o">.</span><span class="n">text</span><span class="p">),</span>
            <span class="s2">&quot;active_sessions&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">active_sessions</span><span class="o">.</span><span class="n">text</span><span class="p">),</span>
            <span class="s2">&quot;system_status&quot;</span><span class="p">:</span> <span class="n">view</span><span class="o">.</span><span class="n">system_status</span><span class="o">.</span><span class="n">text</span>
        <span class="p">}</span>

        <span class="n">metrics_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metrics</span><span class="p">)</span>

        <span class="c1"># Wait before next sample</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">metrics_history</span>
</pre></div>
</div>
<p><strong>Pattern 3: Complex Data Structures</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ProductCatalog</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">product_card</span><span class="p">(</span><span class="n">ParametrizedView</span><span class="p">):</span>
        <span class="n">PARAMETERS</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;product_id&quot;</span><span class="p">,)</span>
        <span class="n">ROOT</span> <span class="o">=</span> <span class="n">ParametrizedLocator</span><span class="p">(</span><span class="s2">&quot;[data-product-id=&#39;</span><span class="si">{product_id}</span><span class="s2">&#39;]&quot;</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.product-name&quot;</span><span class="p">)</span>
        <span class="n">price</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.product-price&quot;</span><span class="p">)</span>
        <span class="n">rating</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.product-rating&quot;</span><span class="p">)</span>
        <span class="n">availability</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.product-availability&quot;</span><span class="p">)</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;.product-image&quot;</span><span class="p">)</span>

    <span class="n">search_results</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.search-results .product-item&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">extract_product_catalog</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">search_term</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract structured product data.&quot;&quot;&quot;</span>

    <span class="c1"># Search for products</span>
    <span class="n">search_box</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#search&quot;</span><span class="p">)</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">search_term</span><span class="p">)</span>

    <span class="c1"># Wait for results</span>
    <span class="n">view</span><span class="o">.</span><span class="n">search_results</span><span class="o">.</span><span class="n">wait_displayed</span><span class="p">()</span>

    <span class="c1"># Get all product IDs from search results</span>
    <span class="n">product_elements</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s2">&quot;.product-item&quot;</span><span class="p">)</span>
    <span class="n">product_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">browser</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;data-product-id&quot;</span><span class="p">,</span> <span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">product_elements</span><span class="p">]</span>

    <span class="c1"># Extract data for each product</span>
    <span class="n">products</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">product_id</span> <span class="ow">in</span> <span class="n">product_ids</span><span class="p">:</span>
        <span class="n">product</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">product_card</span><span class="p">(</span><span class="n">product_id</span><span class="o">=</span><span class="n">product_id</span><span class="p">)</span>
        <span class="n">products</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">products</span>
</pre></div>
</div>
</section>
<section id="navigation-patterns">
<h2>Navigation Patterns<a class="headerlink" href="#navigation-patterns" title="Link to this heading"></a></h2>
<p><strong>Pattern 1: Multi-Step Workflows</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CheckoutWorkflow</span><span class="p">:</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">cart_page</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
        <span class="n">items_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s2">&quot;#cart-items&quot;</span><span class="p">)</span>
        <span class="n">total_price</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#total&quot;</span><span class="p">)</span>
        <span class="n">proceed_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#proceed-checkout&quot;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">shipping_page</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#address&quot;</span><span class="p">)</span>
        <span class="n">city</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#city&quot;</span><span class="p">)</span>
        <span class="n">zip_code</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#zip&quot;</span><span class="p">)</span>
        <span class="n">continue_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#continue&quot;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">payment_page</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
        <span class="n">card_number</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#card-number&quot;</span><span class="p">)</span>
        <span class="n">expiry</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#expiry&quot;</span><span class="p">)</span>
        <span class="n">cvv</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#cvv&quot;</span><span class="p">)</span>
        <span class="n">complete_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#complete-order&quot;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">confirmation_page</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
        <span class="n">order_number</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#order-number&quot;</span><span class="p">)</span>
        <span class="n">order_total</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;#order-total&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">complete_checkout</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">checkout_data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Complete multi-step checkout process.&quot;&quot;&quot;</span>

    <span class="n">workflow</span> <span class="o">=</span> <span class="n">CheckoutWorkflow</span><span class="p">()</span>

    <span class="c1"># Step 1: Review cart</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;/cart&quot;</span><span class="p">)</span>
    <span class="n">cart</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">cart_page</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

    <span class="n">cart_total</span> <span class="o">=</span> <span class="n">cart</span><span class="o">.</span><span class="n">total_price</span><span class="o">.</span><span class="n">text</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cart total: </span><span class="si">{</span><span class="n">cart_total</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">cart</span><span class="o">.</span><span class="n">proceed_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="c1"># Step 2: Shipping information</span>
    <span class="n">shipping</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">shipping_page</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
    <span class="n">shipping</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">checkout_data</span><span class="p">[</span><span class="s2">&quot;shipping&quot;</span><span class="p">])</span>
    <span class="n">shipping</span><span class="o">.</span><span class="n">continue_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="c1"># Step 3: Payment</span>
    <span class="n">payment</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">payment_page</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
    <span class="n">payment</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">checkout_data</span><span class="p">[</span><span class="s2">&quot;payment&quot;</span><span class="p">])</span>
    <span class="n">payment</span><span class="o">.</span><span class="n">complete_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="c1"># Step 4: Confirmation</span>
    <span class="n">confirmation</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">confirmation_page</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
    <span class="n">confirmation</span><span class="o">.</span><span class="n">order_number</span><span class="o">.</span><span class="n">wait_displayed</span><span class="p">()</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;order_number&quot;</span><span class="p">:</span> <span class="n">confirmation</span><span class="o">.</span><span class="n">order_number</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
        <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="n">confirmation</span><span class="o">.</span><span class="n">order_total</span><span class="o">.</span><span class="n">text</span>
    <span class="p">}</span>
</pre></div>
</div>
<p><strong>Pattern 2: Menu Navigation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MainNavigation</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="c1"># Top-level menu items</span>
    <span class="n">products_menu</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#nav-products&quot;</span><span class="p">)</span>
    <span class="n">services_menu</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#nav-services&quot;</span><span class="p">)</span>
    <span class="n">support_menu</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#nav-support&quot;</span><span class="p">)</span>

    <span class="c1"># Dropdown submenus (appear on hover)</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">products_submenu</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
        <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#products-dropdown&quot;</span>

        <span class="n">laptops</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;a[href=&#39;/laptops&#39;]&quot;</span><span class="p">)</span>
        <span class="n">desktops</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;a[href=&#39;/desktops&#39;]&quot;</span><span class="p">)</span>
        <span class="n">accessories</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;a[href=&#39;/accessories&#39;]&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">navigate_to_product_category</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Navigate through dropdown menus.&quot;&quot;&quot;</span>

    <span class="c1"># Hover over main menu to show dropdown</span>
    <span class="n">nav</span><span class="o">.</span><span class="n">products_menu</span><span class="o">.</span><span class="n">hover</span><span class="p">()</span>

    <span class="c1"># Wait for submenu to appear</span>
    <span class="n">nav</span><span class="o">.</span><span class="n">products_submenu</span><span class="o">.</span><span class="n">laptops</span><span class="o">.</span><span class="n">wait_displayed</span><span class="p">()</span>

    <span class="c1"># Click on specific category</span>
    <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;laptops&quot;</span><span class="p">:</span>
        <span class="n">nav</span><span class="o">.</span><span class="n">products_submenu</span><span class="o">.</span><span class="n">laptops</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;desktops&quot;</span><span class="p">:</span>
        <span class="n">nav</span><span class="o">.</span><span class="n">products_submenu</span><span class="o">.</span><span class="n">desktops</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="c1"># ... etc</span>
</pre></div>
</div>
<p><strong>Pattern 3: Breadcrumb Navigation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">BreadcrumbNavigation</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">breadcrumb_items</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.breadcrumb .item&quot;</span><span class="p">)</span>  <span class="c1"># Multiple elements</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_current_path</span><span class="p">(</span><span class="n">nav</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract current navigation path.&quot;&quot;&quot;</span>

    <span class="c1"># Get all breadcrumb elements</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s2">&quot;.breadcrumb .item&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">browser</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">navigate_up_one_level</span><span class="p">(</span><span class="n">nav</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Go up one level in navigation.&quot;&quot;&quot;</span>

    <span class="n">items</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s2">&quot;.breadcrumb .item a&quot;</span><span class="p">)</span>  <span class="c1"># Clickable items only</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># Click the second-to-last item (parent)</span>
        <span class="n">items</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="wait-and-timing-patterns">
<h2>Wait and Timing Patterns<a class="headerlink" href="#wait-and-timing-patterns" title="Link to this heading"></a></h2>
<p><strong>Pattern 1: Smart Waiting</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">widgetastic.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">NoSuchElementException</span>

<span class="k">def</span><span class="w"> </span><span class="nf">wait_for_page_load</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">indicator_widget</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for page to load using a loading indicator.&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Wait for loading indicator to appear</span>
        <span class="n">indicator_widget</span><span class="o">.</span><span class="n">wait_displayed</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="s2">&quot;2s&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading indicator appeared...&quot;</span><span class="p">)</span>

        <span class="c1"># Wait for loading indicator to disappear</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">indicator_widget</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Page loaded successfully!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">NoSuchElementException</span><span class="p">:</span>
        <span class="c1"># No loading indicator, assume page is ready</span>
        <span class="k">pass</span>

    <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
<p><strong>Pattern 2: Content Change Detection</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">wait_for_content_change</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for widget content to change.&quot;&quot;&quot;</span>

    <span class="n">initial_content</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">text</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">current_content</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">text</span>
        <span class="k">if</span> <span class="n">current_content</span> <span class="o">!=</span> <span class="n">initial_content</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">current_content</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content did not change within </span><span class="si">{</span><span class="n">timeout</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Pattern 3: Batch Operations with Delays</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">process_items_with_delay</span><span class="p">(</span><span class="n">items_list</span><span class="p">,</span> <span class="n">process_func</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process multiple items with delays to avoid rate limiting.&quot;&quot;&quot;</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items_list</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing item </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">items_list</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">process_func</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

            <span class="c1"># Add delay between operations</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">items_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># Don&#39;t delay after last item</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error processing </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div>
</section>
<section id="error-handling-patterns">
<h2>Error Handling Patterns<a class="headerlink" href="#error-handling-patterns" title="Link to this heading"></a></h2>
<p><strong>Pattern 1: Graceful Degradation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">safe_widget_operation</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Safely perform widget operations with fallbacks.&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">operation</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">operation</span><span class="p">)()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Widget </span><span class="si">{</span><span class="n">widget</span><span class="si">}</span><span class="s2"> doesn&#39;t support </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">default</span>

    <span class="k">except</span> <span class="n">NoSuchElementException</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Widget </span><span class="si">{</span><span class="n">widget</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">default</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operation </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">default</span>

<span class="c1"># Usage</span>
<span class="n">text_content</span> <span class="o">=</span> <span class="n">safe_widget_operation</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;N/A&quot;</span><span class="p">)</span>
<span class="n">is_visible</span> <span class="o">=</span> <span class="n">safe_widget_operation</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;is_displayed&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Pattern 2: Retry Logic</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">retry_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retry an operation with exponential backoff.&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_attempts</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">operation</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attempt</span> <span class="o">==</span> <span class="n">max_attempts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>  <span class="c1"># Re-raise on final attempt</span>

            <span class="n">wait_time</span> <span class="o">=</span> <span class="n">delay</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="n">attempt</span><span class="p">)</span>  <span class="c1"># Exponential backoff</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempt </span><span class="si">{</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrying in </span><span class="si">{</span><span class="n">wait_time</span><span class="si">}</span><span class="s2"> seconds...&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">wait_time</span><span class="p">)</span>

<span class="c1"># Usage</span>
<span class="k">def</span><span class="w"> </span><span class="nf">click_submit</span><span class="p">():</span>
    <span class="n">form</span><span class="o">.</span><span class="n">submit_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

<span class="n">retry_operation</span><span class="p">(</span><span class="n">click_submit</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Pattern 3: Context Managers for Cleanup</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">contextlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">contextmanager</span>

<span class="nd">@contextmanager</span>
<span class="k">def</span><span class="w"> </span><span class="nf">modal_dialog</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">trigger_button</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Context manager for modal dialog operations.&quot;&quot;&quot;</span>

    <span class="c1"># Open modal</span>
    <span class="n">trigger_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="n">modal</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">modal_dialog</span>
    <span class="n">modal</span><span class="o">.</span><span class="n">wait_displayed</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">modal</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># Always close modal, even if operation fails</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">modal</span><span class="o">.</span><span class="n">close_button</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
                <span class="n">modal</span><span class="o">.</span><span class="n">close_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># Force close with Escape key if button fails</span>
            <span class="n">browser</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">keyboard</span><span class="o">.</span><span class="n">press</span><span class="p">(</span><span class="s2">&quot;Escape&quot;</span><span class="p">)</span>

<span class="c1"># Usage</span>
<span class="k">with</span> <span class="n">modal_dialog</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">open_settings_button</span><span class="p">)</span> <span class="k">as</span> <span class="n">modal</span><span class="p">:</span>
    <span class="n">modal</span><span class="o">.</span><span class="n">theme_select</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
    <span class="n">modal</span><span class="o">.</span><span class="n">save_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="testing-integration-patterns">
<h2>Testing Integration Patterns<a class="headerlink" href="#testing-integration-patterns" title="Link to this heading"></a></h2>
<p><strong>Pattern 1: Page Object Model</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">BasePage</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Common elements for all pages.&quot;&quot;&quot;</span>

    <span class="n">header</span> <span class="o">=</span> <span class="n">HeaderView</span><span class="p">()</span>
    <span class="n">footer</span> <span class="o">=</span> <span class="n">FooterView</span><span class="p">()</span>
    <span class="n">loading_spinner</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.loading-spinner&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_page_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for page to be fully loaded.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Wait for loading spinner to disappear</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">loading_spinner</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loading_spinner</span><span class="o">.</span><span class="n">wait_not_displayed</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="s2">&quot;10s&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">NoSuchElementException</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># No spinner, page probably ready</span>

<span class="k">class</span><span class="w"> </span><span class="nc">LoginPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#login-page&quot;</span>

    <span class="n">username</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#username&quot;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="s2">&quot;#password&quot;</span><span class="p">)</span>
    <span class="n">login_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;#login&quot;</span><span class="p">)</span>
    <span class="n">error_message</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;.error&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform login operation.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_page_ready</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">({</span><span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">login_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_message</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_message</span><span class="o">.</span><span class="n">text</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;Login successful&quot;</span>
</pre></div>
</div>
<p><strong>Pattern 2: Test Data Management</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">TestDataFactory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory for generating test data.&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">user_type</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create test user data.&quot;&quot;&quot;</span>

        <span class="n">base_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;User&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;test.user+</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">@example.com&quot;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">user_type</span> <span class="o">==</span> <span class="s2">&quot;admin&quot;</span><span class="p">:</span>
            <span class="n">base_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;administrator&quot;</span><span class="p">,</span>
                <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="s2">&quot;all&quot;</span>
            <span class="p">})</span>
        <span class="k">elif</span> <span class="n">user_type</span> <span class="o">==</span> <span class="s2">&quot;premium&quot;</span><span class="p">:</span>
            <span class="n">base_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s2">&quot;subscription&quot;</span><span class="p">:</span> <span class="s2">&quot;premium&quot;</span><span class="p">,</span>
                <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;advanced_analytics&quot;</span><span class="p">,</span> <span class="s2">&quot;priority_support&quot;</span><span class="p">]</span>
            <span class="p">})</span>

        <span class="k">return</span> <span class="n">base_data</span>

<span class="c1"># Usage in tests</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_user_registration</span><span class="p">():</span>
    <span class="n">user_data</span> <span class="o">=</span> <span class="n">TestDataFactory</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="s2">&quot;premium&quot;</span><span class="p">)</span>
    <span class="n">registration</span> <span class="o">=</span> <span class="n">RegistrationView</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
    <span class="n">success</span> <span class="o">=</span> <span class="n">registration</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">user_data</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">success</span>
</pre></div>
</div>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>These patterns form the foundation of effective widgetastic automation. To continue learning:</p>
<ol class="arabic simple">
<li><p><strong>Practice</strong>: Implement these patterns in your own applications</p></li>
<li><p><strong>Combine</strong>: Mix and match patterns for complex scenarios</p></li>
<li><p><strong>Extend</strong>: Create your own patterns based on your specific needs</p></li>
<li><p><strong>Share</strong>: Contribute patterns back to the community</p></li>
</ol>
<p><strong>Advanced Topics to Explore</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../tutorials/advanced-widgets.html"><span class="doc">Advanced Widgets Tutorial</span></a> - Complex widget creation</p></li>
<li><p><a class="reference internal" href="../tutorials/version-picking.html"><span class="doc">Version Picking Tutorial</span></a> - Handling application evolution</p></li>
<li><p><a class="reference internal" href="../tutorials/custom-widgets.html"><span class="doc">Custom Widget Development Tutorial</span></a> - Build your own widgets</p></li>
<li><p><a class="reference internal" href="../tutorials/index.html"><span class="doc">Tutorials</span></a> - Complete tutorial collection</p></li>
</ul>
<p>Remember: Good automation is not just about making things work, but making them maintainable, reliable, and easy to understand!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="basic-example.html" class="btn btn-neutral float-left" title="Basic Example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tutorials/index.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2019, Milan Falešník; 2020-2025, Red Hat, Inc. (Apache license 2).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
