

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Widgets Tutorial &mdash; Widgetastic.Core development documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />


      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=249f3023"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IFrame Handling Tutorial" href="iframe-handling.html" />
    <link rel="prev" title="Fill Strategies Tutorial" href="fill-strategies.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



          <a href="../index.html" class="icon icon-home">
            Widgetastic.Core
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/concepts.html">Core Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-steps.html">First Steps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/basic-example.html">Basic Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/common-patterns.html">Common Patterns</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic-widgets.html">Basic Widgets Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="views-and-navigation.html">Views and Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="browser-methods.html">Browser Methods and Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="fill-strategies.html">Fill Strategies Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Widgets Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#learning-objectives">Learning Objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-advanced-widget-environment">Setting Up Advanced Widget Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#table-widget-fundamentals">Table Widget Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tables-with-embedded-widgets">Tables with Embedded Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#complex-table-structures">Complex Table Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="#drag-and-drop-operations">Drag and Drop Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-interaction-patterns">Advanced Interaction Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#edge-cases-and-error-handling">Edge Cases and Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#complete-advanced-automation-example">Complete Advanced Automation Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#best-practices-for-advanced-widgets">Best Practices for Advanced Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#final-cleanup">Final Cleanup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="iframe-handling.html">IFrame Handling Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="window-management.html">Window Management Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ouia-automation.html">OUIA (Open UI Automation) Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="version-picking.html">Version Picking Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-widgets.html">Custom Widget Development Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Widgetastic.Core</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Advanced Widgets Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/advanced-widgets.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <section id="advanced-widgets-tutorial">
<h1>Advanced Widgets Tutorial<a class="headerlink" href="#advanced-widgets-tutorial" title="Link to this heading"></a></h1>
<p>This tutorial demonstrates advanced widgets in Widgetastic.core using comprehensive examples from <code class="docutils literal notranslate"><span class="pre">testing_page.html</span></code>. You’ll learn to work with tables, handle drag &amp; drop operations, and interact with complex UI components.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Time Required</strong>: 60 minutes
<strong>Prerequisites</strong>: Basic widgets tutorial
<strong>Test Pages Used</strong>: <code class="docutils literal notranslate"><span class="pre">testing/html/testing_page.html</span></code></p>
</div>
<section id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Link to this heading"></a></h2>
<p>By completing this tutorial, you will:</p>
<ul class="simple">
<li><p>✅ Master the Table widget for complex data structures</p></li>
<li><p>✅ Handle table rows, columns, and embedded widgets</p></li>
<li><p>✅ Implement drag &amp; drop automation</p></li>
<li><p>✅ Work with dynamic and sortable content</p></li>
<li><p>✅ Handle complex form scenarios and edge cases</p></li>
</ul>
</section>
<section id="setting-up-advanced-widget-environment">
<h2>Setting Up Advanced Widget Environment<a class="headerlink" href="#setting-up-advanced-widget-environment" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">playwright.sync_api</span><span class="w"> </span><span class="kn">import</span> <span class="n">sync_playwright</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">widgetastic.browser</span><span class="w"> </span><span class="kn">import</span> <span class="n">Browser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">widgetastic.widget</span><span class="w"> </span><span class="kn">import</span> <span class="n">View</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">TextInput</span><span class="p">,</span> <span class="n">Checkbox</span><span class="p">,</span> <span class="n">Table</span>

<span class="k">def</span><span class="w"> </span><span class="nf">setup_advanced_widgets_browser</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Setup browser with testing page for advanced widgets.&quot;&quot;&quot;</span>
    <span class="n">test_page_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;testing/html/testing_page.html&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
    <span class="n">test_page_url</span> <span class="o">=</span> <span class="n">test_page_path</span><span class="o">.</span><span class="n">as_uri</span><span class="p">()</span>

    <span class="n">p</span> <span class="o">=</span> <span class="n">sync_playwright</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">browser_instance</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">chromium</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="n">browser_instance</span><span class="o">.</span><span class="n">new_context</span><span class="p">()</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">new_page</span><span class="p">()</span>
    <span class="n">browser</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>

    <span class="c1"># Navigate to comprehensive testing page</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">test_page_url</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">browser</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">browser_instance</span><span class="p">,</span> <span class="n">context</span>

<span class="n">browser</span><span class="p">,</span> <span class="n">playwright</span><span class="p">,</span> <span class="n">browser_instance</span><span class="p">,</span> <span class="n">context</span> <span class="o">=</span> <span class="n">setup_advanced_widgets_browser</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="table-widget-fundamentals">
<h2>Table Widget Fundamentals<a class="headerlink" href="#table-widget-fundamentals" title="Link to this heading"></a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code> widget handles HTML tables with advanced features like embedded widgets, filtering, and complex structures.</p>
<p><strong>Basic Table Structure</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">widgetastic.widget.table</span><span class="w"> </span><span class="kn">import</span> <span class="n">TableRow</span><span class="p">,</span> <span class="n">TableColumn</span>

<span class="k">class</span><span class="w"> </span><span class="nc">StandardTable</span><span class="p">(</span><span class="n">Table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Standard table with proper thead/tbody structure.&quot;&quot;&quot;</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#with-thead&quot;</span>

<span class="n">standard_table</span> <span class="o">=</span> <span class="n">StandardTable</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Basic table information</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table headers: </span><span class="si">{</span><span class="n">standard_table</span><span class="o">.</span><span class="n">headers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: [None, &#39;Column 1&#39;, &#39;Column 2&#39;, &#39;Column 3&#39;, &#39;Column 4&#39;]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of rows: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">standard_table</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: 3</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table displayed: </span><span class="si">{</span><span class="n">standard_table</span><span class="o">.</span><span class="n">is_displayed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: True</span>
</pre></div>
</div>
<p><strong>Reading Table Data</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Iterate through all rows</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">standard_table</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Row </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cell</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">row</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Output:</span>
    <span class="c1"># Row 0: [&#39;asdf&#39;, &#39;qwer&#39;, &#39;yxcv&#39;, &#39;uiop&#39;, &#39;&#39;]</span>
    <span class="c1"># Row 1: [&#39;foo_x&#39;, &#39;bar_x&#39;, &#39;baz_x&#39;, &#39;bat_x&#39;, &#39;&#39;]</span>
    <span class="c1"># Row 2: [&#39;foo_y&#39;, &#39;bar_y&#39;, &#39;baz_y&#39;, &#39;bat_y&#39;, &#39;&#39;]</span>

<span class="c1"># Access specific rows</span>
<span class="n">first_row</span> <span class="o">=</span> <span class="n">standard_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;First row data: </span><span class="si">{</span><span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cell</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">first_row</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Access specific cells</span>
<span class="n">first_cell</span> <span class="o">=</span> <span class="n">standard_table</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Row 0, Column 0</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;First cell text: </span><span class="si">{</span><span class="n">first_cell</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># &quot;asdf&quot;</span>
</pre></div>
</div>
<p><strong>Table Row Selection and Filtering</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find rows by content (returns first matching row)</span>
<span class="n">row_with_foo</span> <span class="o">=</span> <span class="n">standard_table</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="s2">&quot;Column 1&quot;</span><span class="o">=</span><span class="s2">&quot;qwer&quot;</span><span class="p">)</span>  <span class="c1"># Find by column content</span>
<span class="k">if</span> <span class="n">row_with_foo</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found row with &#39;qwer&#39;: </span><span class="si">{</span><span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cell</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">row_with_foo</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Alternative row selection by data attributes</span>
<span class="c1"># Tables in testing page have data-test attributes</span>
<span class="n">row_by_data</span> <span class="o">=</span> <span class="n">standard_table</span><span class="o">.</span><span class="n">row</span><span class="p">((</span><span class="s2">&quot;data-test&quot;</span><span class="p">,</span> <span class="s2">&quot;abc-123&quot;</span><span class="p">))</span>
<span class="k">if</span> <span class="n">row_by_data</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Row with data-test=&#39;abc-123&#39;: </span><span class="si">{</span><span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cell</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">row_by_data</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tables-with-embedded-widgets">
<h2>Tables with Embedded Widgets<a class="headerlink" href="#tables-with-embedded-widgets" title="Link to this heading"></a></h2>
<p>The testing page includes tables with embedded form elements:</p>
<p><strong>Table with Widget Columns</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">TableWithWidgets</span><span class="p">(</span><span class="n">Table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table containing input widgets within cells.&quot;&quot;&quot;</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#withwidgets&quot;</span>

    <span class="c1"># Define column widgets for specific columns</span>
    <span class="n">column_widgets</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">TextInput</span><span class="p">(),</span>  <span class="c1"># Column 2 contains text inputs</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">TextInput</span><span class="p">(),</span>  <span class="c1"># Column 3 contains text inputs</span>
    <span class="p">}</span>

<span class="n">widget_table</span> <span class="o">=</span> <span class="n">TableWithWidgets</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Access embedded widgets</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table headers: </span><span class="si">{</span><span class="n">widget_table</span><span class="o">.</span><span class="n">headers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: [None, &#39;Column 2&#39;, &#39;Column 3&#39;]</span>

<span class="c1"># Work with embedded widgets in first row</span>
<span class="n">first_row</span> <span class="o">=</span> <span class="n">widget_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># The widget in column 2 (index 1)</span>
<span class="n">input_widget_col2</span> <span class="o">=</span> <span class="n">first_row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">widget</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">input_widget_col2</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">):</span>
    <span class="n">input_widget_col2</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s2">&quot;foo_input_value&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Filled column 2 input: </span><span class="si">{</span><span class="n">input_widget_col2</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Regular text cell (column 3, index 2)</span>
<span class="n">text_cell</span> <span class="o">=</span> <span class="n">first_row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column 3 text: </span><span class="si">{</span><span class="n">text_cell</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Advanced Table Widget Patterns</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">AdvancedTableOperations</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">standard_table</span> <span class="o">=</span> <span class="n">StandardTable</span><span class="p">()</span>
    <span class="n">widget_table</span> <span class="o">=</span> <span class="n">TableWithWidgets</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fill_table_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">column_data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill a specific table row with data.&quot;&quot;&quot;</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget_table</span><span class="p">[</span><span class="n">row_index</span><span class="p">]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">column_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">cell</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">col_index</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;widget&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">):</span>
                <span class="n">changed</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">results</span><span class="p">[</span><span class="n">col_index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;changed&#39;</span><span class="p">:</span> <span class="n">changed</span><span class="p">,</span>
                    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">results</span><span class="p">[</span><span class="n">col_index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
                    <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Not fillable&#39;</span>
                <span class="p">}</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">read_table_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read all data from a table.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">row_data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;widget&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">):</span>
                    <span class="c1"># Widget cell</span>
                    <span class="n">row_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Text cell</span>
                    <span class="n">row_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

<span class="n">advanced_ops</span> <span class="o">=</span> <span class="n">AdvancedTableOperations</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Fill table widgets</span>
<span class="n">fill_results</span> <span class="o">=</span> <span class="n">advanced_ops</span><span class="o">.</span><span class="n">fill_table_row</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;new_foo_value&quot;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fill results: </span><span class="si">{</span><span class="n">fill_results</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Read all widget table data</span>
<span class="n">widget_data</span> <span class="o">=</span> <span class="n">advanced_ops</span><span class="o">.</span><span class="n">read_table_data</span><span class="p">(</span><span class="n">advanced_ops</span><span class="o">.</span><span class="n">widget_table</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Widget table data: </span><span class="si">{</span><span class="n">widget_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="complex-table-structures">
<h2>Complex Table Structures<a class="headerlink" href="#complex-table-structures" title="Link to this heading"></a></h2>
<p>The testing page includes tables with rowspan/colspan and multiple tbody elements:</p>
<p><strong>Tables with Rowspan/Colspan</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ComplexTable</span><span class="p">(</span><span class="n">Table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table with rowspan and colspan cells.&quot;&quot;&quot;</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#rowcolspan_table&quot;</span>

    <span class="n">column_widgets</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">4</span><span class="p">:</span> <span class="n">TextInput</span><span class="p">()</span>  <span class="c1"># Widget column (5th column, 0-indexed as 4)</span>
    <span class="p">}</span>

<span class="n">complex_table</span> <span class="o">=</span> <span class="n">ComplexTable</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Complex table headers: </span><span class="si">{</span><span class="n">complex_table</span><span class="o">.</span><span class="n">headers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: [&#39;#&#39;, &#39;First Name&#39;, &#39;Last Name&#39;, &#39;Username&#39;, &#39;Widget&#39;]</span>

<span class="c1"># Handle complex cell structures</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">complex_table</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Row </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> cells: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">cell</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
        <span class="n">colspan</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s2">&quot;colspan&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;get_attribute&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">rowspan</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s2">&quot;rowspan&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;get_attribute&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">span_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; (colspan=</span><span class="si">{</span><span class="n">colspan</span><span class="si">}</span><span class="s2">, rowspan=</span><span class="si">{</span><span class="n">rowspan</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">colspan</span> <span class="ow">or</span> <span class="n">rowspan</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;widget&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Cell [</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">][</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">]: Widget value = </span><span class="si">{</span><span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="si">}{</span><span class="n">span_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Cell [</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">][</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">]: Text = &#39;</span><span class="si">{</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">span_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Multiple Tbody Tables</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MultiTBodyTable</span><span class="p">(</span><span class="n">Table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table with multiple tbody elements.&quot;&quot;&quot;</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#multiple_tbody_table&quot;</span>

<span class="n">multi_tbody_table</span> <span class="o">=</span> <span class="n">MultiTBodyTable</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Access different tbody sections</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">multi_tbody_table</span><span class="p">,</span> <span class="s1">&#39;bodies&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of tbody sections: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">multi_tbody_table</span><span class="o">.</span><span class="n">bodies</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">tbody</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">multi_tbody_table</span><span class="o">.</span><span class="n">bodies</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TBody </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">tbody</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Each tbody can have data-test attributes</span>
        <span class="n">data_test</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">tbody</span><span class="p">,</span> <span class="s1">&#39;data-test&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  data-test attribute: </span><span class="si">{</span><span class="n">data_test</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Dynamic Table Content</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DynamicTable</span><span class="p">(</span><span class="n">Table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table with dynamically added rows.&quot;&quot;&quot;</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#dynamic&quot;</span>

<span class="n">dynamic_table</span> <span class="o">=</span> <span class="n">DynamicTable</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Initial state</span>
<span class="n">initial_rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dynamic_table</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial row count: </span><span class="si">{</span><span class="n">initial_rows</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Add new row using the button on the page</span>
<span class="n">add_button</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s2">&quot;#dynamicadd&quot;</span><span class="p">)</span>
<span class="n">browser</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">add_button</span><span class="p">)</span>

<span class="c1"># Wait for new row to appear (in real scenarios, you might need explicit waits)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Check updated row count</span>
<span class="n">updated_rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dynamic_table</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rows after adding: </span><span class="si">{</span><span class="n">updated_rows</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">updated_rows</span> <span class="o">&gt;</span> <span class="n">initial_rows</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Successfully detected dynamic row addition&quot;</span><span class="p">)</span>

    <span class="c1"># Access the new row</span>
    <span class="n">new_row</span> <span class="o">=</span> <span class="n">dynamic_table</span><span class="p">[</span><span class="n">updated_rows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New row content: </span><span class="si">{</span><span class="p">[</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">cell</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">new_row</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="drag-and-drop-operations">
<h2>Drag and Drop Operations<a class="headerlink" href="#drag-and-drop-operations" title="Link to this heading"></a></h2>
<p>The testing page includes comprehensive drag &amp; drop examples:</p>
<p><strong>Basic Drag and Drop</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DragDropView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="c1"># Drag source element</span>
    <span class="n">drag_source</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;drag_source&quot;</span><span class="p">)</span>

    <span class="c1"># Drop target element</span>
    <span class="n">drop_target</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;drop_target&quot;</span><span class="p">)</span>

    <span class="c1"># Additional draggable for offset testing</span>
    <span class="n">drag_source2</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;drag_source2&quot;</span><span class="p">)</span>

    <span class="c1"># Status display elements</span>
    <span class="n">drop_status</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;drop_status&quot;</span><span class="p">)</span>
    <span class="n">drag_log</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;drag_log&quot;</span><span class="p">)</span>

<span class="n">drag_drop</span> <span class="o">=</span> <span class="n">DragDropView</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Verify drag elements are present</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drag source displayed: </span><span class="si">{</span><span class="n">drag_drop</span><span class="o">.</span><span class="n">drag_source</span><span class="o">.</span><span class="n">is_displayed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drop target displayed: </span><span class="si">{</span><span class="n">drag_drop</span><span class="o">.</span><span class="n">drop_target</span><span class="o">.</span><span class="n">is_displayed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Perform drag and drop operation</span>
<span class="n">browser</span><span class="o">.</span><span class="n">drag_and_drop</span><span class="p">(</span><span class="n">drag_drop</span><span class="o">.</span><span class="n">drag_source</span><span class="p">,</span> <span class="n">drag_drop</span><span class="o">.</span><span class="n">drop_target</span><span class="p">)</span>

<span class="c1"># Check status after drag and drop</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drop status: </span><span class="si">{</span><span class="n">drag_drop</span><span class="o">.</span><span class="n">drop_status</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Drag and Drop by Offset</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get initial position of drag source</span>
<span class="n">initial_location</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">location_of</span><span class="p">(</span><span class="n">drag_drop</span><span class="o">.</span><span class="n">drag_source2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial location: </span><span class="si">{</span><span class="n">initial_location</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Drag by offset (50 pixels right, 30 pixels down)</span>
<span class="n">browser</span><span class="o">.</span><span class="n">drag_and_drop_by_offset</span><span class="p">(</span><span class="n">drag_drop</span><span class="o">.</span><span class="n">drag_source2</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

<span class="c1"># Note: In real scenarios, you might need to verify the position change</span>
<span class="c1"># The testing page logs drag actions for verification</span>

<span class="c1"># Alternative: drag to specific coordinates</span>
<span class="n">browser</span><span class="o">.</span><span class="n">drag_and_drop_to</span><span class="p">(</span><span class="n">drag_drop</span><span class="o">.</span><span class="n">drag_source2</span><span class="p">,</span> <span class="n">to_x</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">to_y</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Sortable List Drag and Drop</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SortableListView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="c1"># The sortable list container</span>
    <span class="n">sortable_list</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;sortable_list&quot;</span><span class="p">)</span>

    <span class="c1"># Individual sortable items</span>
    <span class="n">item1</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">locator</span><span class="o">=</span><span class="s2">&quot;[data-sort-id=&#39;item-1&#39;]&quot;</span><span class="p">)</span>
    <span class="n">item2</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">locator</span><span class="o">=</span><span class="s2">&quot;[data-sort-id=&#39;item-2&#39;]&quot;</span><span class="p">)</span>
    <span class="n">item3</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">locator</span><span class="o">=</span><span class="s2">&quot;[data-sort-id=&#39;item-3&#39;]&quot;</span><span class="p">)</span>

<span class="n">sortable</span> <span class="o">=</span> <span class="n">SortableListView</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Get initial order</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_sortable_order</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get current order of sortable items.&quot;&quot;&quot;</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">elements</span><span class="p">(</span><span class="s2">&quot;#sortable_list .sortable-item span:last-child&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">browser</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>

<span class="n">initial_order</span> <span class="o">=</span> <span class="n">get_sortable_order</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial order: </span><span class="si">{</span><span class="n">initial_order</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Drag first item to second position</span>
<span class="n">browser</span><span class="o">.</span><span class="n">drag_and_drop</span><span class="p">(</span><span class="n">sortable</span><span class="o">.</span><span class="n">item1</span><span class="p">,</span> <span class="n">sortable</span><span class="o">.</span><span class="n">item2</span><span class="p">)</span>

<span class="c1"># Get updated order</span>
<span class="n">updated_order</span> <span class="o">=</span> <span class="n">get_sortable_order</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated order: </span><span class="si">{</span><span class="n">updated_order</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">initial_order</span> <span class="o">!=</span> <span class="n">updated_order</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Successfully reordered sortable list&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-interaction-patterns">
<h2>Advanced Interaction Patterns<a class="headerlink" href="#advanced-interaction-patterns" title="Link to this heading"></a></h2>
<p>Handle complex UI interactions beyond basic widgets:</p>
<p><strong>Alert and Dialog Handling</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">AlertHandlingView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">alert_button</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;alert_button&quot;</span><span class="p">)</span>
    <span class="n">alert_output</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;alert_out&quot;</span><span class="p">)</span>

<span class="n">alert_handler</span> <span class="o">=</span> <span class="n">AlertHandlingView</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Handle JavaScript alerts/prompts</span>
<span class="k">def</span><span class="w"> </span><span class="nf">handle_alert_with_response</span><span class="p">(</span><span class="n">response_text</span><span class="o">=</span><span class="s2">&quot;TestWidget&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle JavaScript prompt dialog.&quot;&quot;&quot;</span>

    <span class="c1"># Set up dialog handler before triggering</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_dialog</span><span class="p">(</span><span class="n">dialog</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dialog message: </span><span class="si">{</span><span class="n">dialog</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="n">response_text</span><span class="p">)</span>

    <span class="n">browser</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;dialog&quot;</span><span class="p">,</span> <span class="n">handle_dialog</span><span class="p">)</span>

    <span class="c1"># Trigger the alert</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">alert_handler</span><span class="o">.</span><span class="n">alert_button</span><span class="p">)</span>

    <span class="c1"># Wait for result to appear</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="c1"># Read the result</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">alert_handler</span><span class="o">.</span><span class="n">alert_output</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Alert result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Clean up handler</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">remove_listener</span><span class="p">(</span><span class="s2">&quot;dialog&quot;</span><span class="p">,</span> <span class="n">handle_dialog</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>

<span class="c1"># Test alert handling</span>
<span class="n">alert_result</span> <span class="o">=</span> <span class="n">handle_alert_with_response</span><span class="p">(</span><span class="s2">&quot;CustomWidget&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Multi-Button Click Handling</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ButtonInteractionView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="c1"># Button that changes state when clicked</span>
    <span class="n">state_button</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;a_button&quot;</span><span class="p">)</span>

    <span class="c1"># Button that detects different mouse buttons</span>
    <span class="n">multi_button</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;multi_button&quot;</span><span class="p">)</span>
    <span class="n">click_result</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;click_result&quot;</span><span class="p">)</span>

    <span class="c1"># Disabled button for state testing</span>
    <span class="n">disabled_button</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;disabled_button&quot;</span><span class="p">)</span>

<span class="n">button_tests</span> <span class="o">=</span> <span class="n">ButtonInteractionView</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Test button state changes</span>
<span class="n">initial_classes</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">button_tests</span><span class="o">.</span><span class="n">state_button</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial button classes: </span><span class="si">{</span><span class="n">initial_classes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">browser</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">button_tests</span><span class="o">.</span><span class="n">state_button</span><span class="p">)</span>

<span class="n">updated_classes</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">button_tests</span><span class="o">.</span><span class="n">state_button</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated button classes: </span><span class="si">{</span><span class="n">updated_classes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="s2">&quot;clicked&quot;</span> <span class="ow">in</span> <span class="n">updated_classes</span> <span class="ow">and</span> <span class="s2">&quot;clicked&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">initial_classes</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Button state change detected&quot;</span><span class="p">)</span>

<span class="c1"># Test disabled button handling</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">button_tests</span><span class="o">.</span><span class="n">disabled_button</span><span class="o">.</span><span class="n">is_enabled</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Correctly detected disabled button&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">button_tests</span><span class="o">.</span><span class="n">disabled_button</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;⚠ Disabled button was clickable (unexpected)&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ Disabled button properly blocked: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Visibility and Dynamic Content</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">VisibilityTestView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="c1"># Hidden element that becomes visible</span>
    <span class="n">invisible_element</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;invisible_appear_p&quot;</span><span class="p">)</span>
    <span class="n">show_element_button</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;invisible_appear_button&quot;</span><span class="p">)</span>

    <span class="c1"># Mixed visibility container</span>
    <span class="n">random_visibility</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;random_visibility&quot;</span><span class="p">)</span>

<span class="n">visibility_test</span> <span class="o">=</span> <span class="n">VisibilityTestView</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Test initial visibility</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initially visible: </span><span class="si">{</span><span class="n">visibility_test</span><span class="o">.</span><span class="n">invisible_element</span><span class="o">.</span><span class="n">is_displayed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Trigger element to appear (has 3-second delay in testing page)</span>
<span class="n">browser</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">visibility_test</span><span class="o">.</span><span class="n">show_element_button</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Triggered show element button (3s delay)&quot;</span><span class="p">)</span>

<span class="c1"># Wait for element to become visible</span>
<span class="k">def</span><span class="w"> </span><span class="nf">wait_for_visibility</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for element to become visible.&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="k">if</span> <span class="n">wait_for_visibility</span><span class="p">(</span><span class="n">visibility_test</span><span class="o">.</span><span class="n">invisible_element</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Element became visible after delay&quot;</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">visibility_test</span><span class="o">.</span><span class="n">invisible_element</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Element content: </span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;⚠ Element did not become visible within timeout&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="edge-cases-and-error-handling">
<h2>Edge Cases and Error Handling<a class="headerlink" href="#edge-cases-and-error-handling" title="Link to this heading"></a></h2>
<p>Handle complex scenarios and error conditions:</p>
<p><strong>Table Edge Cases</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">EdgeCaseTable</span><span class="p">(</span><span class="n">Table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table designed to test edge cases.&quot;&quot;&quot;</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#edge_case_test_table&quot;</span>

    <span class="n">column_widgets</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">4</span><span class="p">:</span> <span class="n">TextInput</span><span class="p">()</span>  <span class="c1"># Input column</span>
    <span class="p">}</span>

<span class="n">edge_table</span> <span class="o">=</span> <span class="n">EdgeCaseTable</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

<span class="c1"># Handle duplicate headers</span>
<span class="n">headers</span> <span class="o">=</span> <span class="n">edge_table</span><span class="o">.</span><span class="n">headers</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Headers (may contain duplicates): </span><span class="si">{</span><span class="n">headers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Find duplicate header indexes</span>
<span class="n">header_counts</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">header_counts</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠ Duplicate header &#39;</span><span class="si">{</span><span class="n">header</span><span class="si">}</span><span class="s2">&#39; at indexes </span><span class="si">{</span><span class="n">header_counts</span><span class="p">[</span><span class="n">header</span><span class="p">]</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">header_counts</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>

<span class="c1"># Handle rows with duplicate key values</span>
<span class="k">def</span><span class="w"> </span><span class="nf">find_rows_with_duplicate_keys</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">key_column_index</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find rows that have duplicate values in a key column.&quot;&quot;&quot;</span>
    <span class="n">key_values</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">duplicate_rows</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">table</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">key_column_index</span><span class="p">:</span>
            <span class="n">key_value</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">key_column_index</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
            <span class="k">if</span> <span class="n">key_value</span> <span class="ow">in</span> <span class="n">key_values</span><span class="p">:</span>
                <span class="n">duplicate_rows</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">key_values</span><span class="p">[</span><span class="n">key_value</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">key_values</span><span class="p">[</span><span class="n">key_value</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>

    <span class="k">return</span> <span class="n">duplicate_rows</span>

<span class="n">duplicate_keys</span> <span class="o">=</span> <span class="n">find_rows_with_duplicate_keys</span><span class="p">(</span><span class="n">edge_table</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># Column 1 is &quot;Key&quot;</span>
<span class="k">if</span> <span class="n">duplicate_keys</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠ Found duplicate keys: </span><span class="si">{</span><span class="n">duplicate_keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Robust Widget Interaction</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">safe_widget_interaction</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Safely interact with widgets with comprehensive error handling.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Check if widget exists and is displayed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">widget</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Widget not displayed&#39;</span><span class="p">}</span>

        <span class="c1"># Check if widget is enabled for interactive operations</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;is_enabled&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">widget</span><span class="o">.</span><span class="n">is_enabled</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Widget not enabled&#39;</span><span class="p">}</span>

        <span class="c1"># Perform the operation</span>
        <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;fill&#39;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;changed&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">widget</span><span class="o">.</span><span class="n">read</span><span class="p">()}</span>
        <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span><span class="p">:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="s1">&#39;clicked&#39;</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;read&#39;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Unknown operation: </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span>

<span class="c1"># Test safe interactions</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">widgetastic.widget</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextInput</span>

<span class="n">test_input</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">)</span>

<span class="c1"># Safe fill operation</span>
<span class="n">fill_result</span> <span class="o">=</span> <span class="n">safe_widget_interaction</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="s1">&#39;test_value&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Safe fill result: </span><span class="si">{</span><span class="n">fill_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Safe read operation</span>
<span class="n">read_result</span> <span class="o">=</span> <span class="n">safe_widget_interaction</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Safe read result: </span><span class="si">{</span><span class="n">read_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="complete-advanced-automation-example">
<h2>Complete Advanced Automation Example<a class="headerlink" href="#complete-advanced-automation-example" title="Link to this heading"></a></h2>
<p>Here’s a comprehensive example combining multiple advanced widgets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ComprehensiveAdvancedAutomation</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="c1"># Tables</span>
    <span class="n">standard_table</span> <span class="o">=</span> <span class="n">StandardTable</span><span class="p">()</span>
    <span class="n">widget_table</span> <span class="o">=</span> <span class="n">TableWithWidgets</span><span class="p">()</span>
    <span class="n">complex_table</span> <span class="o">=</span> <span class="n">ComplexTable</span><span class="p">()</span>

    <span class="c1"># Drag and drop</span>
    <span class="n">drag_source</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;drag_source&quot;</span><span class="p">)</span>
    <span class="n">drop_target</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;drop_target&quot;</span><span class="p">)</span>

    <span class="c1"># Interactive elements</span>
    <span class="n">alert_button</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;alert_button&quot;</span><span class="p">)</span>
    <span class="n">alert_output</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;alert_out&quot;</span><span class="p">)</span>

    <span class="c1"># Dynamic content</span>
    <span class="n">dynamic_table</span> <span class="o">=</span> <span class="n">DynamicTable</span><span class="p">()</span>
    <span class="n">add_row_button</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;dynamicadd&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">comprehensive_automation_workflow</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Comprehensive workflow using multiple advanced widgets.&quot;&quot;&quot;</span>
    <span class="n">automation</span> <span class="o">=</span> <span class="n">ComprehensiveAdvancedAutomation</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># 1. Table operations</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Table Operations ===&quot;</span><span class="p">)</span>

    <span class="c1"># Read standard table data</span>
    <span class="n">standard_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">automation</span><span class="o">.</span><span class="n">standard_table</span><span class="p">:</span>
        <span class="n">standard_data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">cell</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">row</span><span class="p">])</span>
    <span class="n">results</span><span class="p">[</span><span class="s1">&#39;standard_table_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">standard_data</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Standard table rows: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">standard_data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Fill widget table</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">automation</span><span class="o">.</span><span class="n">widget_table</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">first_row</span> <span class="o">=</span> <span class="n">automation</span><span class="o">.</span><span class="n">widget_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">first_row</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">first_row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;widget&#39;</span><span class="p">):</span>
            <span class="n">fill_result</span> <span class="o">=</span> <span class="n">safe_widget_interaction</span><span class="p">(</span>
                <span class="n">first_row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="s1">&#39;automated_value&#39;</span>
            <span class="p">)</span>
            <span class="n">results</span><span class="p">[</span><span class="s1">&#39;widget_table_fill&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fill_result</span>

    <span class="c1"># 2. Dynamic content</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Dynamic Content ===&quot;</span><span class="p">)</span>

    <span class="n">initial_dynamic_rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">automation</span><span class="o">.</span><span class="n">dynamic_table</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">automation</span><span class="o">.</span><span class="n">add_row_button</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Wait for dynamic addition</span>

    <span class="n">updated_dynamic_rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">automation</span><span class="o">.</span><span class="n">dynamic_table</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span>
    <span class="n">results</span><span class="p">[</span><span class="s1">&#39;dynamic_rows_added&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">updated_dynamic_rows</span> <span class="o">-</span> <span class="n">initial_dynamic_rows</span>

    <span class="c1"># 3. Drag and drop</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Drag and Drop ===&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">drag_and_drop</span><span class="p">(</span><span class="n">automation</span><span class="o">.</span><span class="n">drag_source</span><span class="p">,</span> <span class="n">automation</span><span class="o">.</span><span class="n">drop_target</span><span class="p">)</span>
        <span class="n">results</span><span class="p">[</span><span class="s1">&#39;drag_drop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">results</span><span class="p">[</span><span class="s1">&#39;drag_drop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>

    <span class="c1"># 4. Complex table operations</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Complex Table Analysis ===&quot;</span><span class="p">)</span>

    <span class="n">complex_widgets</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">automation</span><span class="o">.</span><span class="n">complex_table</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">cell</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;widget&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">):</span>
                <span class="n">widget_value</span> <span class="o">=</span> <span class="n">safe_widget_interaction</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">)</span>
                <span class="n">complex_widgets</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;row&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span>
                    <span class="s1">&#39;col&#39;</span><span class="p">:</span> <span class="n">j</span><span class="p">,</span>
                    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">widget_value</span>
                <span class="p">})</span>

    <span class="n">results</span><span class="p">[</span><span class="s1">&#39;complex_table_widgets&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">complex_widgets</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Results Summary ===&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># Execute comprehensive automation</span>
<span class="n">comprehensive_results</span> <span class="o">=</span> <span class="n">comprehensive_automation_workflow</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="best-practices-for-advanced-widgets">
<h2>Best Practices for Advanced Widgets<a class="headerlink" href="#best-practices-for-advanced-widgets" title="Link to this heading"></a></h2>
<p><strong>Table Widget Guidelines</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Always define column_widgets for tables with embedded widgets</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GoodTableDefinition</span><span class="p">(</span><span class="n">Table</span><span class="p">):</span>
    <span class="n">ROOT</span> <span class="o">=</span> <span class="s2">&quot;#table-with-inputs&quot;</span>
    <span class="n">column_widgets</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">TextInput</span><span class="p">(),</span>  <span class="c1"># Column 3 has text inputs</span>
        <span class="mi">3</span><span class="p">:</span> <span class="n">Checkbox</span><span class="p">(),</span>   <span class="c1"># Column 4 has checkboxes</span>
    <span class="p">}</span>

<span class="c1"># 2. Handle dynamic tables with proper waiting</span>
<span class="k">def</span><span class="w"> </span><span class="nf">wait_for_table_rows</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">expected_count</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for table to have expected number of rows.&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">current_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">current_count</span> <span class="o">&gt;=</span> <span class="n">expected_count</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># 3. Batch table operations for efficiency</span>
<span class="k">def</span><span class="w"> </span><span class="nf">batch_table_operations</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">operations</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Perform multiple table operations efficiently.&quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">column_ops</span> <span class="ow">in</span> <span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">row_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">row_index</span><span class="p">]</span>
            <span class="n">row_results</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">operation</span> <span class="ow">in</span> <span class="n">column_ops</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">col_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                    <span class="n">cell</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">col_index</span><span class="p">]</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">safe_widget_interaction</span><span class="p">(</span>
                        <span class="n">cell</span><span class="o">.</span><span class="n">widget</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;widget&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">cell</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">operation</span>
                    <span class="p">)</span>
                    <span class="n">row_results</span><span class="p">[</span><span class="n">col_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>

            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">row_index</span><span class="p">:</span> <span class="n">row_results</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div>
<p><strong>Drag and Drop Best Practices</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Verify elements are ready for drag operations</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_drag_ready</span><span class="p">(</span><span class="n">source_element</span><span class="p">,</span> <span class="n">target_element</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify elements are ready for drag and drop.&quot;&quot;&quot;</span>
    <span class="n">checks</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;source_displayed&#39;</span><span class="p">:</span> <span class="n">source_element</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">,</span>
        <span class="s1">&#39;target_displayed&#39;</span><span class="p">:</span> <span class="n">target_element</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">,</span>
        <span class="s1">&#39;source_enabled&#39;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source_element</span><span class="p">,</span> <span class="s1">&#39;is_enabled&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="n">all_ready</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">checks</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">all_ready</span><span class="p">,</span> <span class="n">checks</span>

<span class="c1"># 2. Handle different drag and drop scenarios</span>
<span class="k">def</span><span class="w"> </span><span class="nf">smart_drag_and_drop</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Smart drag and drop with fallback methods.&quot;&quot;&quot;</span>
    <span class="n">ready</span><span class="p">,</span> <span class="n">checks</span> <span class="o">=</span> <span class="n">verify_drag_ready</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">ready</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drag not ready: </span><span class="si">{</span><span class="n">checks</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span> <span class="ow">or</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;standard&#39;</span><span class="p">:</span>
            <span class="n">browser</span><span class="o">.</span><span class="n">drag_and_drop</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Standard drag failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
            <span class="c1"># Fallback to offset-based approach</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">source_loc</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">location_of</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
                <span class="n">target_loc</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">location_of</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
                <span class="n">offset_x</span> <span class="o">=</span> <span class="n">target_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">source_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">offset_y</span> <span class="o">=</span> <span class="n">target_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">source_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

                <span class="n">browser</span><span class="o">.</span><span class="n">drag_and_drop_by_offset</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">offset_x</span><span class="p">,</span> <span class="n">offset_y</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e2</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Offset drag failed: </span><span class="si">{</span><span class="n">e2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># 3. Monitor drag and drop results</span>
<span class="k">def</span><span class="w"> </span><span class="nf">monitor_drag_result</span><span class="p">(</span><span class="n">status_element</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Monitor drag and drop operation results.&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">initial_status</span> <span class="o">=</span> <span class="n">status_element</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
        <span class="n">current_status</span> <span class="o">=</span> <span class="n">status_element</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">current_status</span> <span class="o">!=</span> <span class="n">initial_status</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">current_status</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">initial_status</span>
</pre></div>
</div>
</section>
<section id="final-cleanup">
<h2>Final Cleanup<a class="headerlink" href="#final-cleanup" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clean up browser resources</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">context</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">browser_instance</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">playwright</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cleanup error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<p>Advanced widgets in Widgetastic.core provide:</p>
<ul class="simple">
<li><p><strong>Table Widget</strong>: Comprehensive table handling with embedded widgets, complex structures, and dynamic content</p></li>
<li><p><strong>Drag and Drop</strong>: Full drag and drop support with multiple interaction methods</p></li>
<li><p><strong>Complex Interactions</strong>: Alert handling, dynamic content, and advanced UI patterns</p></li>
<li><p><strong>Error Handling</strong>: Robust error handling for complex scenarios</p></li>
<li><p><strong>Performance</strong>: Efficient batch operations and smart waiting strategies</p></li>
</ul>
<p>Key takeaways:
* Use Table widgets for any tabular data with column_widgets for embedded elements
* Handle dynamic content with appropriate waiting strategies
* Implement comprehensive error handling for robust automation
* Use batch operations for efficiency in complex scenarios
* Test edge cases and error conditions in your automation code</p>
<p>This completes the advanced widgets tutorial. You’re now ready to handle the most complex UI automation scenarios with Widgetastic.core.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fill-strategies.html" class="btn btn-neutral float-left" title="Fill Strategies Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="iframe-handling.html" class="btn btn-neutral float-right" title="IFrame Handling Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2019, Milan Falešník; 2020-2025, Red Hat, Inc. (Apache license 2).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
